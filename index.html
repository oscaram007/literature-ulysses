<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ulysses — Alfred Lord Tennyson</title>

  <!-- SEO & Open Graph -->
  <meta name="description" content="An immersive reading of Ulysses by Alfred Lord Tennyson (1842) — a dramatic monologue of restlessness, grief, and the unquenchable will to strive." />
  <meta property="og:title" content="Ulysses — Alfred Lord Tennyson" />
  <meta property="og:description" content="To strive, to seek, to find, and not to yield. An immersive typographic experience of Tennyson's great dramatic monologue." />
  <meta property="og:type" content="website" />
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Ulysses — Alfred Lord Tennyson" />
  <meta name="twitter:description" content="To strive, to seek, to find, and not to yield." />

  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;900&family=EB+Garamond:ital,wght@0,400;0,500;0,600;1,400;1,500;1,600&display=swap" rel="stylesheet" />

  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    /* ══════════════════════════════════════════════════
       FLUID TYPE SCALE
       html font-size flows from 14px @ 320px viewport
       to 19px @ 1100px+, making every rem unit scale.
       Formula: clamp(14px, 0.73vw + 11.66px, 19px)
    ══════════════════════════════════════════════════ */
    html {
      font-size: clamp(14px, 0.73vw + 11.66px, 19px);
      scroll-behavior: smooth;
    }

    /* ══════════════════════════════════════════════════
       FLUID SPACING SCALE — used throughout as var()
       Each step is a clamp() from tight → comfortable.
    ══════════════════════════════════════════════════ */
    :root {
      /* Colours */
      --gold:        #c9a84c;
      --gold-light:  #e8c97a;
      --gold-bright: #f5dfa0;
      --gold-dim:    #9a7a34;
      --s1: #7a9cc4;
      --s2: #c4a882;
      --s3: #c9a84c;

      /* Fluid space tokens */
      --sp-xs:   clamp(0.4rem,  0.8vw,  0.65rem);   /*  6–12px  */
      --sp-sm:   clamp(0.7rem,  1.4vw,  1.1rem);    /* 10–21px  */
      --sp-md:   clamp(1.2rem,  2.5vw,  2rem);      /* 17–38px  */
      --sp-lg:   clamp(1.8rem,  4vw,    3.2rem);    /* 25–61px  */
      --sp-xl:   clamp(2.5rem,  5.5vw,  4.5rem);    /* 35–86px  */
      --sp-2xl:  clamp(3.5rem,  7vw,    6rem);      /* 49–114px */
      --sp-3xl:  clamp(5rem,    9vw,    8rem);      /* 70–152px */

      /* Fluid content widths */
      --w-poem:    min(680px, 90vw);
      --w-prose:   min(580px, 88vw);
      --w-breath:  min(820px, 84vw);

      /* Fluid radius for ripple */
      --ripple-size: clamp(180px, 22vw, 280px);
    }

    body {
      background-color: rgb(6, 9, 15);
      color: #c8cfe0;
      font-family: 'EB Garamond', Georgia, serif;
      font-size: 1rem;          /* inherits fluid html base */
      line-height: 1.9;
      overflow-x: hidden;
    }

    /* ══════════════════ SKIP NAV ══════════════════ */

    .skip-link {
      position: absolute; top: -100%; left: 1rem;
      background: var(--gold); color: #06090f;
      font-family: 'Cinzel', serif;
      font-size: clamp(0.55rem, 0.8vw, 0.7rem);
      letter-spacing: 0.2em; text-transform: uppercase;
      padding: 0.5em 1.1em; text-decoration: none;
      z-index: 9999; border-radius: 0 0 4px 4px;
      transition: top 0.2s ease;
    }
    .skip-link:focus { top: 0; }

    /* ══════════════════ FIXED LAYERS ══════════════════ */

    #stars {
      position: fixed; inset: 0;
      pointer-events: none; z-index: 0;
    }

    #progress {
      position: fixed; top: 0; left: 0;
      height: clamp(1.5px, 0.25vw, 3px);
      background: linear-gradient(90deg, var(--gold-dim), var(--gold-light));
      z-index: 999; width: 0%;
      transition: width 0.08s linear;
    }

    .side-label {
      position: fixed;
      right: clamp(0.8rem, 1.5vw, 1.6rem);
      top: 50%;
      transform: translateY(-50%) rotate(90deg);
      font-family: 'Cinzel', serif;
      font-size: clamp(0.38rem, 0.5vw, 0.48rem);
      letter-spacing: 0.44em; color: var(--gold-dim);
      opacity: 0.45; text-transform: uppercase;
      white-space: nowrap; z-index: 10; pointer-events: none;
    }

    #hook-strip {
      position: fixed; bottom: 0; left: 0; right: 0;
      padding: clamp(0.7rem, 1.5vw, 1.1rem) clamp(1rem, 3vw, 2rem) clamp(0.9rem, 2vw, 1.4rem);
      text-align: center;
      background: linear-gradient(to top, rgba(6,9,15,0.88) 60%, transparent);
      font-family: 'EB Garamond', serif; font-style: italic;
      font-size: clamp(0.78rem, 1.2vw, 0.92rem);
      letter-spacing: 0.06em;
      color: rgba(201,168,76,0.55);
      opacity: 0; pointer-events: none;
      transition: opacity 1s ease;
      z-index: 50;
    }

    /* ══════════════════ HERO ══════════════════ */

    .hero {
      position: relative; min-height: 100svh;
      display: flex; flex-direction: column;
      align-items: center; justify-content: center;
      text-align: center;
      padding: var(--sp-xl) var(--sp-md) var(--sp-3xl);
      z-index: 1; overflow: hidden;
    }

    #seascape {
      position: absolute; inset: 0;
      width: 100%; height: 100%;
      z-index: 0; pointer-events: none;
    }

    .hero-vignette {
      position: absolute; inset: 0; z-index: 1; pointer-events: none;
      background:
        radial-gradient(ellipse 100% 80% at 50% 40%, rgba(4,8,22,0.82) 0%, rgba(4,8,22,0.4) 60%, transparent 100%),
        linear-gradient(to bottom, rgba(4,8,22,0.5) 0%, rgba(4,8,22,0.15) 40%, rgba(4,8,22,0.7) 100%);
    }

    .hero-content {
      position: relative; z-index: 2;
      display: flex; flex-direction: column; align-items: center;
    }

    .hero-eyebrow {
      font-family: 'Cinzel', serif;
      font-size: clamp(0.48rem, 0.8vw, 0.62rem);
      letter-spacing: 0.48em; text-transform: uppercase;
      color: var(--gold-dim);
      margin-bottom: clamp(1.4rem, 3vw, 2.6rem);
      opacity: 0; animation: fadeUp 1.2s ease forwards 0.3s;
    }

    .hero-title {
      font-family: 'Cinzel', serif; font-weight: 900;
      font-size: clamp(3.8rem, 14vw, 12rem);
      line-height: 0.88; letter-spacing: -0.02em;
      color: transparent;
      background: linear-gradient(155deg, var(--gold-bright) 0%, var(--gold) 45%, var(--gold-dim) 100%);
      -webkit-background-clip: text; background-clip: text;
      opacity: 0; animation: fadeUp 1.5s ease forwards 0.6s;
    }

    .hero-rule {
      width: clamp(44px, 6vw, 80px); height: 1px;
      background: linear-gradient(90deg, transparent, var(--gold), transparent);
      margin: clamp(1.4rem, 3vw, 2.6rem) auto clamp(1rem, 2vw, 2rem);
      opacity: 0; animation: fadeUp 1s ease forwards 1s;
    }

    .hero-author {
      font-family: 'EB Garamond', serif; font-style: italic;
      font-size: clamp(0.9rem, 1.5vw, 1.1rem);
      color: #8090aa; letter-spacing: 0.08em;
      opacity: 0; animation: fadeUp 1s ease forwards 1.2s;
    }

    .hero-hook {
      margin-top: clamp(2rem, 4vw, 3.5rem);
      font-family: 'EB Garamond', serif; font-style: italic;
      font-size: clamp(1rem, 2.2vw, 1.5rem);
      color: rgba(200,215,240,0.75); letter-spacing: 0.03em;
      line-height: 1.65;
      max-width: min(480px, 88vw);
      opacity: 0; animation: hookReveal 3s cubic-bezier(0.16,1,0.3,1) forwards 2s;
    }

    .hero-hook strong {
      color: var(--gold-light); font-style: normal; font-weight: 500;
    }

    .hero-hook-attr {
      margin-top: clamp(0.4rem, 0.8vw, 0.65rem);
      font-family: 'Cinzel', serif;
      font-size: clamp(0.42rem, 0.7vw, 0.52rem);
      letter-spacing: 0.42em; text-transform: uppercase;
      color: var(--gold-dim); opacity: 0;
      animation: fadeIn 1.5s ease forwards 4.2s;
    }

    .hero-scroll-cue {
      position: absolute;
      bottom: clamp(1.4rem, 3vh, 2.5rem);
      left: 50%;
      transform: translateX(-50%); z-index: 2;
      display: flex; flex-direction: column; align-items: center;
      gap: clamp(0.3rem, 0.6vw, 0.6rem);
      opacity: 0; animation: fadeUp 1s ease forwards 4.8s;
    }

    .hero-scroll-cue span {
      font-family: 'Cinzel', serif;
      font-size: clamp(0.42rem, 0.7vw, 0.52rem);
      letter-spacing: 0.42em; text-transform: uppercase; color: var(--gold-dim);
    }

    .scroll-line {
      width: 1px;
      height: clamp(30px, 5vh, 52px);
      background: linear-gradient(to bottom, var(--gold-dim), transparent);
      animation: scrollPulse 2.5s ease-in-out infinite;
    }

    /* ══════════════════ POEM LAYOUT ══════════════════ */

    .poem-wrapper {
      position: relative; z-index: 1;
      max-width: var(--w-poem); margin: 0 auto;
      padding: var(--sp-xl) clamp(1rem, 4vw, 2.5rem) var(--sp-lg);
    }

    /* ══════════════════ STANZA ══════════════════ */

    .stanza {
      opacity: 0; transform: translateY(32px);
      transition: opacity 1s ease, transform 1s ease;
    }
    .stanza.visible { opacity: 1; transform: translateY(0); }

    .stanza-header {
      margin-bottom: clamp(1.4rem, 2.8vw, 2.4rem);
      display: flex; align-items: baseline;
      gap: clamp(0.7rem, 1.5vw, 1.4rem);
    }
    .stanza-num {
      font-family: 'Cinzel', serif;
      font-size: clamp(0.44rem, 0.75vw, 0.55rem);
      letter-spacing: 0.55em; text-transform: uppercase;
    }
    .stanza-mood {
      font-family: 'EB Garamond', serif; font-style: italic;
      font-size: clamp(0.75rem, 1.2vw, 0.88rem);
      letter-spacing: 0.05em;
    }
    .stanza-hline { flex: 1; height: 1px; opacity: 0.2; }

    .stanza-i .stanza-num    { color: var(--s1); }
    .stanza-i .stanza-mood   { color: rgba(122,156,196,0.6); }
    .stanza-i .stanza-hline  { background: linear-gradient(90deg, var(--s1), transparent); }

    .stanza-ii .stanza-num   { color: var(--s2); }
    .stanza-ii .stanza-mood  { color: rgba(196,168,130,0.65); }
    .stanza-ii .stanza-hline { background: linear-gradient(90deg, var(--s2), transparent); }

    .stanza-iii .stanza-num  { color: var(--s3); }
    .stanza-iii .stanza-mood { color: rgba(201,168,76,0.7); }
    .stanza-iii .stanza-hline{ background: linear-gradient(90deg, var(--s3), transparent); }

    /* ══════════════════ LINE TYPOGRAPHY ══════════════════ */

    .lines { position: relative; }
    .line  { display: block; }
    .line.indent { padding-left: clamp(1.5em, 4vw, 3em); }

    /* Stanza I — cold, grey-blue */
    .stanza-i .lines {
      color: #8898b5;
      font-size: clamp(0.9rem, 1.4vw, 1.04rem);
      line-height: 1.96;
    }
    .stanza-i .line.key {
      color: var(--gold-light); font-style: italic;
      font-size: clamp(1rem, 1.6vw, 1.18rem); line-height: 2.12;
    }
    .stanza-i .line.key-major {
      color: var(--gold-bright); font-style: italic; font-weight: 500;
      font-size: clamp(1.1rem, 1.8vw, 1.34rem); line-height: 2.28;
    }

    /* Stanza II — intimate, italic, warm amber */
    .stanza-ii .lines {
      color: #b0a08a;
      font-size: clamp(0.88rem, 1.35vw, 1.02rem);
      line-height: 2.12; font-style: italic;
    }
    .stanza-ii .line.key {
      color: var(--s2);
      font-size: clamp(0.96rem, 1.5vw, 1.12rem);
      font-weight: 500;
    }
    .stanza-ii .line.closing {
      color: #c8b895;
      font-size: clamp(0.98rem, 1.55vw, 1.14rem);
      font-weight: 500; margin-top: 0.6em;
    }

    /* Stanza III — building gold */
    .stanza-iii .lines {
      color: #a8b4cc;
      font-size: clamp(0.95rem, 1.5vw, 1.1rem);
      line-height: 2.12;
    }
    .stanza-iii .line.key {
      color: var(--gold-light); font-style: italic;
      font-size: clamp(1.02rem, 1.6vw, 1.2rem); line-height: 2.25;
    }
    .stanza-iii .line.key-major {
      color: var(--gold-bright); font-style: italic; font-weight: 500;
      font-size: clamp(1.1rem, 1.8vw, 1.36rem); line-height: 2.4;
    }
    .stanza-iii .line.crescendo {
      color: var(--gold-bright);
      font-size: clamp(1rem, 1.6vw, 1.18rem);
      line-height: 2.22; font-weight: 500;
    }

    
    /* ══════════════════ BREAKOUT LINE ══════════════════ */

    .breakout-section {
      position: relative; z-index: 1;
      width: 100vw; margin-left: calc(50% - 50vw);
      padding: var(--sp-xl) 0 var(--sp-2xl);
      text-align: center; overflow: hidden;
    }

    .breakout-inner {
      position: relative; display: inline-block;
      max-width: 100vw;
    }

    .breakout-line {
      font-family: 'EB Garamond', serif; font-style: italic; font-weight: 500;
      font-size: clamp(1.8rem, 7vw, 8rem);
      line-height: 1.1; letter-spacing: -0.01em;
      color: transparent;
      background: linear-gradient(145deg,
        rgba(120,155,200,0.6) 0%,
        rgba(220,205,155,0.9) 35%,
        rgba(201,168,76,1) 55%,
        rgba(220,205,155,0.9) 75%,
        rgba(120,155,200,0.55) 100%
      );
      -webkit-background-clip: text; background-clip: text;
      white-space: normal;
      word-break: break-word;
      padding: 0 clamp(1rem, 5vw, 3rem);
      -webkit-mask-image: linear-gradient(90deg,
        transparent 0%, black 10%, black 90%, transparent 100%);
      mask-image: linear-gradient(90deg,
        transparent 0%, black 10%, black 90%, transparent 100%);
      opacity: 0; transform: translateY(20px);
      transition: opacity 1.4s ease, transform 1.4s ease;
    }

    .breakout-section.visible .breakout-line { opacity: 1; transform: translateY(0); }

    .breakout-label {
      display: block;
      margin-top: clamp(0.8rem, 1.5vw, 1.4rem);
      font-family: 'Cinzel', serif;
      font-size: clamp(0.42rem, 0.65vw, 0.52rem);
      letter-spacing: 0.5em; text-transform: uppercase;
      color: var(--gold-dim); opacity: 0;
      transition: opacity 1.4s ease 0.5s;
    }

    .breakout-section.visible .breakout-label { opacity: 0.65; }

    /* ══════════════════ BREATH PAUSES ══════════════════ */

    .breath-pause {
      position: relative; z-index: 1;
      min-height: 100svh;
      display: flex; align-items: center; justify-content: center;
      overflow: hidden;
    }

    .breath-pause::before {
      content: ''; position: absolute; inset: 0;
      background: radial-gradient(ellipse 70% 50% at 50% 50%, rgba(201,168,76,0.025) 0%, transparent 80%);
      pointer-events: none;
    }

    .breath-inner {
      position: relative; text-align: center;
      padding: var(--sp-md);
      max-width: var(--w-breath);
    }

    .breath-line {
      font-family: 'EB Garamond', serif; font-style: italic;
      font-size: clamp(1.3rem, 3.6vw, 3.2rem);
      line-height: 1.45; letter-spacing: 0.03em;
      color: rgba(200,215,240,0.08);
      transition: color 2.2s cubic-bezier(0.16,1,0.3,1);
    }

    .breath-pause.visible .breath-line { color: rgba(200,215,240,0.7); }

    .breath-attr {
      display: block;
      margin-top: clamp(1rem, 2vw, 1.8rem);
      font-family: 'Cinzel', serif;
      font-size: clamp(0.4rem, 0.65vw, 0.5rem);
      letter-spacing: 0.45em; text-transform: uppercase;
      color: rgba(201,168,76,0);
      transition: color 1.8s ease 0.8s;
    }

    .breath-pause.visible .breath-attr { color: rgba(201,168,76,0.45); }

    .stanza-break {
      display: flex; align-items: center;
      gap: clamp(0.8rem, 2vw, 1.6rem);
      padding: clamp(2.5rem, 5vh, 4rem) 0;
      opacity: 0; transition: opacity 1.3s ease;
    }
    .stanza-break.visible { opacity: 1; }
    .break-rule { flex: 1; height: 1px; }
    .break-text {
      font-family: 'EB Garamond', serif; font-style: italic;
      font-size: clamp(0.78rem, 1.2vw, 0.92rem);
      white-space: nowrap; letter-spacing: 0.03em;
    }
    .break-cold .break-rule { background: linear-gradient(90deg, transparent, rgba(122,156,196,0.25), transparent); }
    .break-cold .break-text { color: rgba(122,156,196,0.5); }
    .break-warm .break-rule { background: linear-gradient(90deg, transparent, rgba(196,168,130,0.25), transparent); }
    .break-warm .break-text { color: rgba(196,168,130,0.55); }

    /* ══════════════════ FINALE ══════════════════ */

    .finale-section { position: relative; z-index: 1; }

    .finale-divider {
      display: flex; align-items: center;
      gap: clamp(1rem, 2.5vw, 2rem);
      padding: var(--sp-xl) clamp(1rem, 4vw, 2.5rem) 0;
      max-width: var(--w-poem); margin: 0 auto;
      opacity: 0; transition: opacity 1.2s ease;
    }
    .finale-divider.visible { opacity: 1; }
    .finale-div-line {
      flex: 1; height: 1px;
      background: linear-gradient(90deg, transparent, rgba(201,168,76,0.35), transparent);
    }
    .finale-div-text {
      font-family: 'Cinzel', serif;
      font-size: clamp(0.42rem, 0.65vw, 0.52rem);
      letter-spacing: 0.5em; color: var(--gold-dim); text-transform: uppercase;
    }

    .finale-curtain {
      padding: var(--sp-2xl) clamp(1rem, 4vw, 2rem) var(--sp-3xl);
      text-align: center; overflow: hidden;
    }

    .finale-words {
      display: flex; flex-wrap: wrap;
      justify-content: center;
      gap: clamp(0.15em, 0.4vw, 0.22em) clamp(0.25em, 0.5vw, 0.38em);
      margin-bottom: clamp(1rem, 2vw, 1.6rem);
    }

    .finale-word {
      font-family: 'Cinzel', serif; font-weight: 600;
      font-size: clamp(1rem, 3.2vw, 2.2rem);
      color: var(--gold); letter-spacing: 0.06em;
      opacity: 0; transform: translateY(16px);
      transition: opacity 0.65s ease, transform 0.65s ease;
    }
    .finale-word.sep { color: var(--gold-dim); font-weight: 400; }
    .finale-word.lit { opacity: 1; transform: translateY(0); }

    .finale-climax {
      font-family: 'Cinzel', serif; font-weight: 900;
      font-size: clamp(1.8rem, 6vw, 5rem);
      letter-spacing: 0.03em; line-height: 1.1;
      color: transparent;
      background: linear-gradient(140deg, var(--gold-bright) 0%, var(--gold) 50%, var(--gold-dim) 100%);
      -webkit-background-clip: text; background-clip: text;
      opacity: 0; transform: translateY(26px);
      transition: opacity 1.1s ease 0.2s, transform 1.1s ease 0.2s;
      margin-bottom: clamp(2rem, 4.5vw, 3.5rem);
    }
    .finale-climax.lit { opacity: 1; transform: translateY(0); }

    .finale-underline {
      width: 0; height: clamp(1px, 0.2vw, 2px);
      margin: 0 auto; border-radius: 2px;
      background: linear-gradient(90deg, var(--gold-dim), var(--gold-light), var(--gold-dim));
      transition: width 2s cubic-bezier(0.22,1,0.36,1);
      max-width: min(520px, 80vw);
    }
    .finale-underline.drawn { width: min(65vw, 520px); }

    .finale-attr {
      margin-top: clamp(1.6rem, 3.5vw, 2.8rem);
      font-family: 'EB Garamond', serif; font-style: italic;
      font-size: clamp(0.78rem, 1.2vw, 0.9rem);
      color: var(--gold-dim); letter-spacing: 0.1em;
      opacity: 0; transition: opacity 1.2s ease;
    }
    .finale-attr.lit { opacity: 0.7; }

    /* ══════════════════ EPILOGUE ══════════════════ */

    .epilogue {
      position: relative; z-index: 1;
      max-width: var(--w-prose); margin: 0 auto;
      padding: var(--sp-xl) clamp(1rem, 4vw, 2.5rem) var(--sp-3xl);
      text-align: center;
      opacity: 0; transition: opacity 1.5s ease;
    }
    .epilogue.visible { opacity: 1; }

    .epilogue-rule {
      width: clamp(28px, 4vw, 40px); height: 1px;
      margin: 0 auto clamp(1.8rem, 3.5vw, 3rem);
      background: linear-gradient(90deg, transparent, var(--gold-dim), transparent);
    }

    .epilogue-text {
      font-family: 'EB Garamond', serif;
      font-size: clamp(0.82rem, 1.3vw, 0.95rem);
      line-height: 1.9;
      color: rgba(180,195,220,0.65); letter-spacing: 0.01em;
    }

    .epilogue-text em { color: rgba(201,168,76,0.7); font-style: italic; }

    .epilogue-echo {
      margin-top: clamp(1.8rem, 3.5vw, 3rem);
      font-family: 'EB Garamond', serif; font-style: italic;
      font-size: clamp(0.76rem, 1.2vw, 0.88rem);
      color: rgba(120,140,170,0.45);
      letter-spacing: 0.04em; line-height: 1.7;
    }

    /* ══════════════════ WAVE + FOOTER ══════════════════ */

    .wave-wrap {
      position: relative; z-index: 1;
      height: clamp(60px, 9vw, 110px); overflow: hidden;
    }
    .wave-wrap svg {
      position: absolute; bottom: 0;
      animation: waveAnim 10s linear infinite; width: 200%;
    }

    .footer-credit {
      position: relative; z-index: 2; text-align: center;
      padding: clamp(1rem, 2vw, 1.5rem) 1rem clamp(2rem, 5vw, 3.5rem);
      font-family: 'Cinzel', serif;
      font-size: clamp(0.75rem, 1.4vw, 1.1rem);
      letter-spacing: 0.3em; text-transform: uppercase;
      color: #ffffff; opacity: 0.9;
    }

    /* ══════════════════ KEYFRAMES ══════════════════ */

    @keyframes fadeUp {
      from { opacity: 0; transform: translateY(20px); }
      to   { opacity: 1; transform: translateY(0); }
    }
    @keyframes fadeIn {
      from { opacity: 0; } to { opacity: 1; }
    }
    @keyframes hookReveal {
      0%   { opacity: 0; transform: translateY(12px); }
      100% { opacity: 1; transform: translateY(0); }
    }
    @keyframes scrollPulse {
      0%,100% { opacity: 0.2; transform: scaleY(1); }
      50%     { opacity: 0.85; transform: scaleY(1.15); }
    }
    @keyframes waveAnim {
      0%   { transform: translateX(0); }
      100% { transform: translateX(-50%); }
    }

    /* ══════════════════ CUSTOM CURSOR ══════════════════ */

    /* Hide default cursor across the page */
    body, body * { cursor: none !important; }

    /* Restore pointer for interactive elements when hovered */
    a, button, [role="button"], input, select, textarea { cursor: none !important; }

    /* The navigator's dot — precise, gold, central anchor */
    #cursor-dot {
      position: fixed;
      width: 6px; height: 6px;
      border-radius: 50%;
      background: var(--gold-bright);
      pointer-events: none; z-index: 10001;
      transform: translate(-50%, -50%);
      transition: width 0.25s ease, height 0.25s ease,
                  background 0.25s ease, opacity 0.3s ease,
                  box-shadow 0.25s ease;
      box-shadow: 0 0 6px 1px rgba(245,223,160,0.6),
                  0 0 14px 3px rgba(201,168,76,0.25);
      opacity: 0;
      will-change: transform;
    }
    body.cursor-active #cursor-dot { opacity: 1; }

    /* The compass ring — orbits at a distance, slow to follow */
    #cursor-ring {
      position: fixed;
      width: 36px; height: 36px;
      border-radius: 50%;
      border: 1px solid rgba(201,168,76,0.35);
      pointer-events: none; z-index: 10000;
      transform: translate(-50%, -50%);
      transition: width 0.35s ease, height 0.35s ease,
                  border-color 0.35s ease, opacity 0.4s ease;
      opacity: 0;
      will-change: transform;
      animation: compassSpin 18s linear infinite;
    }
    body.cursor-active #cursor-ring { opacity: 1; }

    @keyframes compassSpin {
      from { transform: translate(-50%, -50%) rotate(0deg); }
      to   { transform: translate(-50%, -50%) rotate(360deg); }
    }

    /* Four compass tick marks */
    #cursor-ring::before,
    #cursor-ring::after {
      content: '';
      position: absolute;
      background: rgba(201,168,76,0.65);
      border-radius: 1px;
    }
    /* North tick */
    #cursor-ring::before {
      width: 1px; height: 6px;
      left: 50%; top: -4px;
      transform: translateX(-50%);
      box-shadow: 0 40px 0 0 rgba(201,168,76,0.35); /* south tick via shadow */
    }
    /* East tick */
    #cursor-ring::after {
      width: 6px; height: 1px;
      top: 50%; right: -4px;
      transform: translateY(-50%);
      box-shadow: -44px 0 0 0 rgba(201,168,76,0.35); /* west tick via shadow */
    }

    /* Hover state — pointer on interactive elements */
    body.cursor-pointer #cursor-dot {
      width: 10px; height: 10px;
      background: var(--gold);
      box-shadow: 0 0 10px 3px rgba(201,168,76,0.7),
                  0 0 24px 6px rgba(201,168,76,0.3);
    }
    body.cursor-pointer #cursor-ring {
      width: 48px; height: 48px;
      border-color: rgba(201,168,76,0.6);
      animation-duration: 8s; /* spin faster on hover */
    }

    /* Text hover state — reading mode: dot becomes a soft caret */
    body.cursor-text #cursor-dot {
      width: 2px; height: 18px;
      border-radius: 2px;
      background: rgba(201,168,76,0.75);
      box-shadow: 0 0 8px 2px rgba(201,168,76,0.35);
    }
    body.cursor-text #cursor-ring {
      opacity: 0 !important;
    }

    /* Click burst — momentary flash */
    body.cursor-clicking #cursor-dot {
      width: 14px; height: 14px;
      background: var(--gold-bright);
      box-shadow: 0 0 18px 5px rgba(245,223,160,0.9),
                  0 0 40px 12px rgba(201,168,76,0.5);
    }
    body.cursor-clicking #cursor-ring {
      width: 56px; height: 56px;
      border-color: rgba(245,223,160,0.8);
      animation-duration: 3s;
    }

    /* The constellation canvas — sits between glow and content */
    #cursor-canvas {
      position: fixed; inset: 0;
      pointer-events: none; z-index: 9999;
      opacity: 0; transition: opacity 0.5s ease;
    }
    body.cursor-active #cursor-canvas { opacity: 1; }

    /* ══════════════════ CURSOR GLOW ══════════════════ */

    #cursor-glow {
      position: fixed; inset: 0;
      pointer-events: none; z-index: 9998;
      opacity: 0; transition: opacity 0.6s ease;
      will-change: background;
    }
    body.cursor-active #cursor-glow { opacity: 1; }

    /* ══════════════════ RIPPLE ══════════════════ */

    .ripple {
      position: fixed; border-radius: 50%;
      pointer-events: none; z-index: 9997;
      transform: translate(-50%, -50%) scale(0);
      background: transparent;
      border: clamp(1px, 0.15vw, 1.5px) solid rgba(201, 168, 76, 0.7);
      animation: rippleExpand 1.6s cubic-bezier(0.22, 1, 0.36, 1) forwards;
    }
    .ripple.ripple-outer {
      border-color: rgba(122, 156, 196, 0.3);
      animation-duration: 2.2s; animation-delay: 0.1s;
    }

    @keyframes rippleExpand {
      0%   { transform: translate(-50%, -50%) scale(0); opacity: 1; }
      60%  { opacity: 0.5; }
      100% { transform: translate(-50%, -50%) scale(1); opacity: 0; }
    }

    /* ══════════════════ REDUCED MOTION ══════════════════ */
    @media (prefers-reduced-motion: reduce) {
      *, *::before, *::after {
        animation-duration: 0.001ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.001ms !important;
      }
      .stanza, .stanza-break, .finale-divider,
      .breath-pause, .breakout-section, .epilogue {
        opacity: 1 !important; transform: none !important;
      }
      .breakout-line, .breakout-label { opacity: 1 !important; transform: none !important; }
      .breath-line  { color: rgba(200,215,240,0.7) !important; }
      .breath-attr  { color: rgba(201,168,76,0.45) !important; }
      #stars { display: none; }
      .hero-scroll-cue { display: none; }
      html { scroll-behavior: auto; }
      #cursor-glow { display: none !important; }
      #cursor-dot  { display: none !important; }
      #cursor-ring { display: none !important; }
      #cursor-canvas { display: none !important; }
      body, body * { cursor: auto !important; }
      .ripple { display: none !important; }
    }

    /* ══════════════════ FINE-TUNING: VERY SMALL ══════════════════ */
    /* Below 400px: collapse side-label, tighten indents, wrap breakout */
    @media (max-width: 400px) {
      .side-label { display: none; }
      .breakout-line { white-space: normal; line-height: 1.25; }
      .line.indent { padding-left: 1.5em; }
    }
  </style>
</head>
<body>

<!-- Skip navigation for keyboard users -->
<a class="skip-link" href="#poem">Skip to poem</a>

<!-- Cursor glow overlay — painted via JS -->
<div id="cursor-glow" aria-hidden="true"></div>

<!-- Custom cursor elements -->
<canvas id="cursor-canvas" aria-hidden="true"></canvas>
<div id="cursor-ring" aria-hidden="true"></div>
<div id="cursor-dot" aria-hidden="true"></div>

<!-- Progress bar: ARIA progressbar -->
<div
  id="progress"
  role="progressbar"
  aria-label="Reading progress"
  aria-valuenow="0"
  aria-valuemin="0"
  aria-valuemax="100"
></div>

<canvas id="stars" aria-hidden="true"></canvas>
<div class="side-label" aria-hidden="true">To strive &nbsp;·&nbsp; to seek &nbsp;·&nbsp; to find &nbsp;·&nbsp; and not to yield</div>
<div id="hook-strip" aria-hidden="true">I cannot rest from travel: I will drink<br>Life to the lees.</div>

<!-- ══════════════════════════════════
     HERO — with live seascape
══════════════════════════════════ -->
<section class="hero" id="hero" aria-label="Title card">
  <canvas id="seascape" aria-label="A moonlit seascape with a sailing ship on dark waters"></canvas>
  <div class="hero-vignette" aria-hidden="true"></div>

  <div class="hero-content">
    <p class="hero-eyebrow">Alfred Lord Tennyson &nbsp;·&nbsp; 1842</p>
    <h1 class="hero-title">Ulysses</h1>
    <div class="hero-rule" aria-hidden="true"></div>
    <p class="hero-author">A dramatic monologue</p>

    <p class="hero-hook">
      I cannot rest from travel: I will drink<br>
      <strong>Life to the lees.</strong>
    </p>
    <span class="hero-hook-attr">— line 6</span>
  </div>

  <div class="hero-scroll-cue" aria-hidden="true">
    <div class="scroll-line"></div>
    <span>Read</span>
  </div>
</section>

<!-- Single <main> wraps all poem content -->
<main id="poem">

<!-- ══════════════════════════════════
     STANZA I — Restlessness & Memory
══════════════════════════════════ -->
<div class="poem-wrapper">
  <article class="stanza stanza-i" id="s1" aria-labelledby="s1-heading">
    <div class="stanza-header">
      <span class="stanza-num" id="s1-heading">I</span>
      <span class="stanza-mood">Restlessness &amp; Memory</span>
      <div class="stanza-hline" aria-hidden="true"></div>
    </div>
    <div class="lines" role="group" aria-label="Stanza I">
      <span class="line">It little profits that an idle king,</span>
      <span class="line">By this still hearth, among these barren crags,</span>
      <span class="line">Match'd with an aged wife, I mete and dole</span>
      <span class="line">Unequal laws unto a savage race,</span>
      <span class="line">That hoard, and sleep, and feed, and know not me.</span>
      <span class="line key-major">I cannot rest from travel: I will drink</span>
      <span class="line key-major">Life to the lees: All times I have enjoy'd</span>
      <span class="line key">Greatly, have suffer'd greatly, both with those</span>
      <span class="line">That loved me, and alone, on shore, and when</span>
      <span class="line">Thro' scudding drifts the rainy Hyades</span>
      <span class="line">Vext the dim sea: I am become a name;</span>
      <span class="line key">For always roaming with a hungry heart</span>
      <span class="line">Much have I seen and known; cities of men</span>
      <span class="line">And manners, climates, councils, governments,</span>
      <span class="line">Myself not least, but honour'd of them all;</span>
      <span class="line">And drunk delight of battle with my peers,</span>
      <span class="line">Far on the ringing plains of windy Troy.</span>
      <span class="line key-major">I am a part of all that I have met;</span>
      <span class="line key">Yet all experience is an arch wherethro'</span>
      <span class="line key">Gleams that untravell'd world whose margin fades</span>
      <span class="line key">For ever and forever when I move.</span>
      <span class="line">How dull it is to pause, to make an end,</span>
      <span class="line">To rust unburnish'd, not to shine in use!</span>
      <span class="line">As tho' to breathe were life! Life piled on life</span>
      <span class="line">Were all too little, and of one to me</span>
      <span class="line">Little remains: but every hour is saved</span>
      <span class="line">From that eternal silence, something more,</span>
      <span class="line">A bringer of new things; and vile it were</span>
      <span class="line">For some three suns to store and hoard myself,</span>
      <span class="line">And this gray spirit yearning in desire</span>
      <span class="line key">To follow knowledge like a sinking star,</span>
    </div>
  </article>
</div>

<!-- ══════════════════════════════════
     BREAKOUT LINE — transgressive typography
══════════════════════════════════ -->
<div class="breakout-section" id="breakout" aria-hidden="false">
  <div class="breakout-inner">
    <span class="breakout-line">Beyond the utmost bound of human thought.</span>
    <span class="breakout-label">— the close of Stanza I</span>
  </div>
</div>

<!-- ══════════════════════════════════
     BREATH PAUSE I
══════════════════════════════════ -->
<section class="breath-pause" id="breath1" aria-label="Reflection pause">
  <div class="breath-inner">
    <p class="breath-line">"I am a part of all that I have met."</p>
    <span class="breath-attr">Stanza I · line 18</span>
  </div>
</section>

<!-- ══════════════════════════════════
     STANZA II — A Tender Farewell
══════════════════════════════════ -->
<div class="poem-wrapper">
  <article class="stanza stanza-ii" id="s2" aria-labelledby="s2-heading">
    <div class="stanza-header">
      <span class="stanza-num" id="s2-heading">II</span>
      <span class="stanza-mood">A Tender Farewell</span>
      <div class="stanza-hline" aria-hidden="true"></div>
    </div>
    <div class="lines" role="group" aria-label="Stanza II">
      <span class="line indent">This is my son, mine own Telemachus,</span>
      <span class="line">To whom I leave the sceptre and the isle,—</span>
      <span class="line">Well-loved of me, discerning to fulfil</span>
      <span class="line">This labour, by slow prudence to make mild</span>
      <span class="line">A rugged people, and thro' soft degrees</span>
      <span class="line key">Subdue them to the useful and the good.</span>
      <span class="line">Most blameless is he, centred in the sphere</span>
      <span class="line">Of common duties, decent not to fail</span>
      <span class="line">In offices of tenderness, and pay</span>
      <span class="line key">Meet adoration to my household gods,</span>
      <span class="line">When I am gone.</span>
      <span class="line closing">&emsp;&emsp;He works his work, I mine.</span>
    </div>
  </article>
</div>

<!-- ══════════════════════════════════
     BREATH PAUSE II
══════════════════════════════════ -->
<section class="breath-pause" id="breath2" aria-label="Reflection pause">
  <div class="breath-inner">
    <p class="breath-line">"'T is not too late to seek a newer world."</p>
    <span class="breath-attr">Stanza III · line 57</span>
  </div>
</section>

<!-- ══════════════════════════════════
     STANZA III — The Call to Arms
══════════════════════════════════ -->
<div class="poem-wrapper">
  <article class="stanza stanza-iii" id="s3" aria-labelledby="s3-heading">
    <div class="stanza-header">
      <span class="stanza-num" id="s3-heading">III</span>
      <span class="stanza-mood">The Call to Arms</span>
      <div class="stanza-hline" aria-hidden="true"></div>
    </div>
    <div class="lines" role="group" aria-label="Stanza III">
      <span class="line indent">There lies the port; the vessel puffs her sail:</span>
      <span class="line">There gloom the dark, broad seas. My mariners,</span>
      <span class="line">Souls that have toil'd, and wrought, and thought with me—</span>
      <span class="line">That ever with a frolic welcome took</span>
      <span class="line">The thunder and the sunshine, and opposed</span>
      <span class="line key">Free hearts, free foreheads—you and I are old;</span>
      <span class="line">Old age hath yet his honour and his toil;</span>
      <span class="line key-major">Death closes all: but something ere the end,</span>
      <span class="line key-major">Some work of noble note, may yet be done,</span>
      <span class="line">Not unbecoming men that strove with Gods.</span>
      <span class="line">The lights begin to twinkle from the rocks:</span>
      <span class="line key">The long day wanes: the slow moon climbs: the deep</span>
      <span class="line key">Moans round with many voices. Come, my friends,</span>
      <span class="line key-major">'T is not too late to seek a newer world.</span>
      <span class="line">Push off, and sitting well in order smite</span>
      <span class="line">The sounding furrows; for my purpose holds</span>
      <span class="line key">To sail beyond the sunset, and the baths</span>
      <span class="line key">Of all the western stars, until I die.</span>
      <span class="line">It may be that the gulfs will wash us down:</span>
      <span class="line key">It may be we shall touch the Happy Isles,</span>
      <span class="line key">And see the great Achilles, whom we knew.</span>
      <span class="line crescendo">Tho' much is taken, much abides; and tho'</span>
      <span class="line crescendo">We are not now that strength which in old days</span>
      <span class="line crescendo">Moved earth and heaven, that which we are, we are;</span>
      <span class="line crescendo">One equal temper of heroic hearts,</span>
      <span class="line crescendo">Made weak by time and fate, but strong in will</span>
    </div>
  </article>
</div>

<!-- ══════════════════════════════════
     FINALE
══════════════════════════════════ -->
<section class="finale-section" aria-label="Final lines">
  <div class="finale-divider" id="finaleDivider" aria-hidden="true">
    <div class="finale-div-line"></div>
    <span class="finale-div-text">The Resolution</span>
    <div class="finale-div-line"></div>
  </div>

  <div class="finale-curtain">
    <div class="finale-words" id="finaleWords" aria-label="To strive, to seek, to find,">
      <span class="finale-word" data-delay="0">To</span>
      <span class="finale-word" data-delay="300">strive,</span>
      <span class="finale-word sep" data-delay="720" aria-hidden="true">·</span>
      <span class="finale-word" data-delay="940">to</span>
      <span class="finale-word" data-delay="1220">seek,</span>
      <span class="finale-word sep" data-delay="1620" aria-hidden="true">·</span>
      <span class="finale-word" data-delay="1840">to</span>
      <span class="finale-word" data-delay="2120">find,</span>
    </div>

    <div class="finale-climax" id="finaleClimax">and not to yield.</div>
    <div class="finale-underline" id="finaleUnderline" aria-hidden="true"></div>
    <div class="finale-attr" id="finaleAttr">— Alfred Lord Tennyson, Ulysses, 1842</div>
  </div>
</section>



</main><!-- end #poem -->

<!-- Wave footer -->
<div class="wave-wrap" aria-hidden="true">
  <svg viewBox="0 0 1440 110" preserveAspectRatio="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M0,55 C200,95 400,15 600,55 C800,95 1000,15 1200,55 C1320,75 1400,55 1440,55 L1440,110 L0,110 Z" fill="rgba(10,18,45,0.4)"/>
    <path d="M0,65 C180,30 360,85 540,65 C720,45 900,85 1080,65 C1260,45 1380,70 1440,65 L1440,110 L0,110 Z" fill="rgba(7,12,30,0.5)"/>
    <path d="M0,78 C220,52 440,96 660,78 C880,60 1100,94 1320,78 L1440,78 L1440,110 L0,110 Z" fill="rgba(6,9,15,1)"/>
  </svg>
</div>
<footer class="footer-credit">Alfred Lord Tennyson &nbsp;·&nbsp; Ulysses &nbsp;·&nbsp; 1842</footer>

<script>
/* ══════════════════════════════════════════════════
   REDUCED MOTION DETECTION
══════════════════════════════════════════════════ */
const reducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;

/* ══════════════════════════════════════════════════
   VISIBILITY — pause canvas loops when tab is hidden
══════════════════════════════════════════════════ */
let pageVisible = true;
document.addEventListener('visibilitychange', () => {
  pageVisible = !document.hidden;
});

/* ══════════════════════════════════════════════════
   STARS — fixed background
══════════════════════════════════════════════════ */
(function () {
  if (reducedMotion) return; // CSS hides the canvas; no need to run

  const c = document.getElementById('stars');
  const ctx = c.getContext('2d');
  let stars = [];
  let rafId = null;

  function resize() {
    const prevW = c.width || window.innerWidth;
    const prevH = c.height || window.innerHeight;
    c.width  = window.innerWidth;
    c.height = window.innerHeight;

    // Reposition existing stars proportionally instead of recreating
    if (stars.length) {
      const scaleX = c.width  / prevW;
      const scaleY = c.height / prevH;
      stars.forEach(s => { s.x *= scaleX; s.y *= scaleY; });
    } else {
      init(280);
    }
  }

  function init(n) {
    stars = Array.from({ length: n }, () => ({
      x: Math.random() * c.width,
      y: Math.random() * c.height * 0.75,
      r: Math.random() * 1.0 + 0.12,
      a: Math.random() * 0.8 + 0.1,
      sp: Math.random() * 0.003 + 0.001,
      ph: Math.random() * Math.PI * 2
    }));
  }

  function draw(t) {
    ctx.clearRect(0, 0, c.width, c.height);
    for (const s of stars) {
      const a = s.a * (0.4 + 0.6 * Math.sin(t * s.sp + s.ph));
      ctx.beginPath();
      ctx.arc(s.x, s.y, s.r, 0, Math.PI * 2);
      ctx.fillStyle = `rgba(210,220,250,${a.toFixed(3)})`;
      ctx.fill();
    }
  }

  let lastT = null;
  function loop(timestamp) {
    rafId = requestAnimationFrame(loop);
    if (!pageVisible) return;
    if (lastT === null) lastT = timestamp;
    const t = timestamp * 0.001; // seconds
    draw(t);
  }

  resize();
  requestAnimationFrame(loop);

  let resizeTimer;
  window.addEventListener('resize', () => {
    clearTimeout(resizeTimer);
    resizeTimer = setTimeout(resize, 100);
  }, { passive: true });
})();

/* ══════════════════════════════════════════════════
   SEASCAPE — hero canvas
══════════════════════════════════════════════════ */
(function () {
  const c   = document.getElementById('seascape');
  const ctx = c.getContext('2d');
  const hero = document.getElementById('hero');

  function resize() {
    c.width  = hero.offsetWidth;
    c.height = hero.offsetHeight;
  }

  function draw(t) {
    if (!pageVisible) return;
    const W = c.width, H = c.height;
    ctx.clearRect(0, 0, W, H);

    const hy = H * 0.60;

    /* Moon */
    const mx = W * 0.73, my = H * 0.20;
    const mr = Math.max(16, Math.min(W, H) * 0.036);

    const halo = ctx.createRadialGradient(mx, my, 0, mx, my, mr * 8);
    halo.addColorStop(0,    'rgba(230,218,172,0.18)');
    halo.addColorStop(0.25, 'rgba(230,218,172,0.07)');
    halo.addColorStop(1,    'rgba(0,0,0,0)');
    ctx.fillStyle = halo;
    ctx.beginPath(); ctx.arc(mx, my, mr * 8, 0, Math.PI * 2); ctx.fill();

    ctx.beginPath(); ctx.arc(mx, my, mr, 0, Math.PI * 2);
    const moonG = ctx.createRadialGradient(mx - mr*0.25, my - mr*0.2, 0, mx, my, mr);
    moonG.addColorStop(0, 'rgba(248,240,205,0.92)');
    moonG.addColorStop(1, 'rgba(215,202,158,0.78)');
    ctx.fillStyle = moonG; ctx.fill();

    /* Ocean fill */
    const oceanG = ctx.createLinearGradient(0, hy, 0, H);
    oceanG.addColorStop(0,   'rgba(6,14,40,0.94)');
    oceanG.addColorStop(0.5, 'rgba(4,10,28,0.97)');
    oceanG.addColorStop(1,   'rgba(3,7,18,0.99)');
    ctx.fillStyle = oceanG;
    ctx.fillRect(0, hy, W, H - hy);

    /* Horizon mist */
    const mist = ctx.createLinearGradient(0, hy - 28, 0, hy + 28);
    mist.addColorStop(0,   'rgba(10,20,55,0)');
    mist.addColorStop(0.5, 'rgba(14,26,65,0.28)');
    mist.addColorStop(1,   'rgba(6,14,38,0)');
    ctx.fillStyle = mist;
    ctx.fillRect(0, hy - 28, W, 56);

    /* Moon reflection */
    for (let i = 0; i < 14; i++) {
      const p  = i / 14;
      const ry = hy + p * (H - hy) * 0.68;
      const rw = mr * (1.6 + i * 0.38) * (0.55 + 0.45 * Math.sin(t * 1.1 + i * 0.65 + 0.4));
      const ra = Math.max(0, 0.13 - p * 0.009);
      ctx.beginPath();
      ctx.ellipse(mx, ry, rw, 1.4 + p * 0.9, 0, 0, Math.PI * 2);
      ctx.fillStyle = `rgba(225,208,155,${ra.toFixed(3)})`;
      ctx.fill();
    }

    /* Wave layers — back to front */
    const wl = [
      { y: 0,    a: 3,  f: 0.006, sp: 0.14, op: 0.22, c: '8,18,52'  },
      { y: 0.12, a: 5,  f: 0.009, sp: 0.26, op: 0.32, c: '6,14,42'  },
      { y: 0.28, a: 7,  f: 0.011, sp: 0.40, op: 0.46, c: '5,11,34'  },
      { y: 0.48, a: 9,  f: 0.013, sp: 0.58, op: 0.62, c: '4,9,26'   },
      { y: 0.70, a: 11, f: 0.016, sp: 0.78, op: 0.78, c: '3,7,19'   },
    ];

    for (const w of wl) {
      const baseY = hy + w.y * (H - hy);
      ctx.beginPath();
      ctx.moveTo(0, baseY);
      for (let x = 0; x <= W; x += 3) {
        const y = baseY
          + Math.sin(x * w.f + t * w.sp) * w.a
          + Math.sin(x * w.f * 2.1 - t * w.sp * 0.65) * (w.a * 0.32)
          + Math.sin(x * w.f * 0.48 + t * w.sp * 0.38) * (w.a * 0.18);
        ctx.lineTo(x, y);
      }
      ctx.lineTo(W, H); ctx.lineTo(0, H); ctx.closePath();
      ctx.fillStyle = `rgba(${w.c},${w.op})`;
      ctx.fill();
    }

    /* Ship silhouette */
    const sx = W * 0.17, sy = hy - 1;
    const ss = Math.max(10, Math.min(W, H) * 0.020);
    ctx.save();
    ctx.translate(sx, sy);

    ctx.fillStyle = 'rgba(3,6,18,0.96)';
    ctx.beginPath();
    ctx.moveTo(-ss*3.8, 0);
    ctx.bezierCurveTo(-ss*3.2, -ss*0.6, ss*2.8, -ss*0.6, ss*3.8, 0);
    ctx.lineTo(ss*3.2, ss);
    ctx.lineTo(-ss*3.2, ss);
    ctx.closePath(); ctx.fill();

    ctx.fillRect(-ss*0.1, -ss*5, ss*0.2, ss*5);
    ctx.fillRect(ss*1.6 - ss*0.1, -ss*3.2, ss*0.16, ss*3.2);

    ctx.beginPath();
    ctx.moveTo(-ss*0.06, -ss*4.8);
    ctx.lineTo(ss*2.0,   -ss*1.8);
    ctx.lineTo(ss*0.5,   -ss*0.5);
    ctx.lineTo(-ss*0.06, -ss*0.5);
    ctx.closePath();
    ctx.fillStyle = 'rgba(4,7,22,0.92)'; ctx.fill();

    ctx.beginPath();
    ctx.moveTo(ss*1.55, -ss*3.0);
    ctx.lineTo(ss*3.5,  -ss*1.0);
    ctx.lineTo(ss*1.55, -ss*0.5);
    ctx.closePath();
    ctx.fillStyle = 'rgba(3,6,20,0.88)'; ctx.fill();

    ctx.restore();
  }

  /* Delta-time loop — frame-rate independent */
  let startTime = null;
  function loop(timestamp) {
    if (startTime === null) startTime = timestamp;
    const t = (timestamp - startTime) * 0.001; // seconds elapsed
    if (!reducedMotion) draw(t);
    requestAnimationFrame(loop);
  }

  resize(); requestAnimationFrame(loop);
  window.addEventListener('resize', resize, { passive: true });
})();

/* ══════════════════════════════════════════════════
   COLOR TEMPERATURE — bg shifts cold → warm on scroll
   Sets directly on body so the change takes effect.
══════════════════════════════════════════════════ */
function updateColorTemp() {
  const prog = window.scrollY / (document.documentElement.scrollHeight - window.innerHeight);
  // Cold: rgb(6,9,15) → Warm: rgb(13,8,4)
  const r = Math.round(6  + prog * 7);
  const g = Math.round(9  - prog * 1);
  const b = Math.round(15 - prog * 11);
  document.body.style.backgroundColor = `rgb(${r},${g},${b})`;
}

/* ══════════════════════════════════════════════════
   PERSISTENT HOOK STRIP
══════════════════════════════════════════════════ */
const hookStrip = document.getElementById('hook-strip');
const heroEl    = document.getElementById('hero');

function updateHookStrip() {
  const heroBottom = heroEl.offsetTop + heroEl.offsetHeight;
  const scrollY    = window.scrollY;
  const total      = document.documentElement.scrollHeight - window.innerHeight;
  const prog       = scrollY / total;

  const pastHero   = scrollY > heroBottom;
  const nearFinale = prog > 0.82;
  hookStrip.style.opacity = (pastHero && !nearFinale) ? '1' : '0';
}


/* ══════════════════════════════════════════════════
   SCROLL REVEAL — stanzas, breaks, breath, breakout
   In reduced-motion mode CSS already shows everything.
══════════════════════════════════════════════════ */
if (!reducedMotion) {
  const revealEls = document.querySelectorAll(
    '.stanza, .stanza-break, .finale-divider, .breath-pause, .breakout-section, .epilogue'
  );
  const io = new IntersectionObserver((entries) => {
    entries.forEach(e => {
      if (e.isIntersecting) { e.target.classList.add('visible'); io.unobserve(e.target); }
    });
  }, { threshold: 0.08 });
  revealEls.forEach(el => io.observe(el));
} else {
  // Immediately visible for reduced motion
  document.querySelectorAll(
    '.stanza, .stanza-break, .finale-divider, .breath-pause, .breakout-section, .epilogue'
  ).forEach(el => el.classList.add('visible'));
}

/* ══════════════════════════════════════════════════
   FINALE TRIGGER
══════════════════════════════════════════════════ */
let finaleTriggered = false;
function triggerFinale() {
  if (finaleTriggered) return;
  finaleTriggered = true;

  if (reducedMotion) {
    // Show everything at once
    document.querySelectorAll('#finaleWords .finale-word').forEach(w => w.classList.add('lit'));
    document.getElementById('finaleClimax').classList.add('lit');
    document.getElementById('finaleUnderline').classList.add('drawn');
    document.getElementById('finaleAttr').classList.add('lit');
    return;
  }

  document.querySelectorAll('#finaleWords .finale-word').forEach(w => {
    setTimeout(() => w.classList.add('lit'), parseInt(w.dataset.delay || 0));
  });
  setTimeout(() => document.getElementById('finaleClimax').classList.add('lit'),    2700);
  setTimeout(() => document.getElementById('finaleUnderline').classList.add('drawn'), 3380);
  setTimeout(() => document.getElementById('finaleAttr').classList.add('lit'),      4700);
}

new IntersectionObserver((entries) => {
  entries.forEach(e => { if (e.isIntersecting) triggerFinale(); });
}, { threshold: 0.28 }).observe(document.getElementById('finaleWords'));

/* ══════════════════════════════════════════════════
   CURSOR SYSTEM — Navigator's Compass
   ─ Custom dot + compass ring (lerp follow)
   ─ Constellation trail canvas (particle motes +
     brief connecting lines like stars being drawn)
   ─ Soft lantern glow (scroll-driven cold→warm)
   ─ Context states: default / pointer / text / click
══════════════════════════════════════════════════ */
(function () {
  if (reducedMotion) return;

  const dotEl    = document.getElementById('cursor-dot');
  const ringEl   = document.getElementById('cursor-ring');
  const glowEl   = document.getElementById('cursor-glow');
  const canvas   = document.getElementById('cursor-canvas');
  const ctx      = canvas.getContext('2d');
  const body     = document.body;

  /* ── Sizing ── */
  function resizeCanvas() {
    canvas.width  = window.innerWidth;
    canvas.height = window.innerHeight;
  }
  resizeCanvas();
  window.addEventListener('resize', resizeCanvas, { passive: true });

  /* ── Scroll-driven colour ── */
  function scrollProg() {
    return window.scrollY / Math.max(1, document.documentElement.scrollHeight - window.innerHeight);
  }
  function cursorColor(alpha) {
    const p = scrollProg();
    const r = Math.round(100 + p * 101);
    const g = Math.round(140 + p * 18);
    const b = Math.round(210 - p * 150);
    return `rgba(${r},${g},${b},${alpha})`;
  }
  function goldColor(alpha) {
    return `rgba(201,168,76,${alpha})`;
  }

  /* ── Mouse state ── */
  let mouseX = -999, mouseY = -999;
  let dotX   = -999, dotY   = -999;  // dot follows tightly
  let ringX  = -999, ringY  = -999;  // ring follows lazily
  let isOver = false;

  /* ── Particle trail ── */
  const particles = [];
  const MAX_PARTICLES = 48;

  /* ── Constellation history — recent positions ── */
  const history = [];
  const HIST_LEN = 18;       // positions kept for constellation
  const HIST_STRIDE = 3;     // every Nth frame we record
  let frameCount = 0;

  /* ── Spawn a mote on movement ── */
  let lastSpawnX = -999, lastSpawnY = -999;
  function maybeSpawnParticle() {
    const dx = mouseX - lastSpawnX, dy = mouseY - lastSpawnY;
    const dist = Math.sqrt(dx*dx + dy*dy);
    if (dist < 8) return; // too close to previous spawn point
    lastSpawnX = mouseX; lastSpawnY = mouseY;

    const p = scrollProg();
    // Colour mixes from blue-silver to warm gold as reader scrolls
    const useGold = Math.random() < (0.3 + p * 0.55);

    particles.push({
      x: mouseX + (Math.random() - 0.5) * 8,
      y: mouseY + (Math.random() - 0.5) * 8,
      vx: (Math.random() - 0.5) * 0.8,
      vy: -(Math.random() * 0.6 + 0.1),  // drift upward, like sea spray
      life: 1,
      decay: Math.random() * 0.018 + 0.010,
      r: Math.random() * 1.8 + 0.5,
      gold: useGold,
    });

    if (particles.length > MAX_PARTICLES) particles.splice(0, 1);
  }

  /* ── Paint constellation lines between history points ── */
  function drawConstellation() {
    if (history.length < 2) return;
    ctx.save();
    for (let i = 1; i < history.length; i++) {
      const a = history[i-1], b = history[i];
      const t = i / history.length; // 0 → old, 1 → recent
      const age = 1 - t;            // older = more faded
      ctx.beginPath();
      ctx.moveTo(a.x, a.y);
      ctx.lineTo(b.x, b.y);
      ctx.strokeStyle = `rgba(201,168,76,${age * 0.10})`;
      ctx.lineWidth = 0.6;
      ctx.stroke();
    }
    ctx.restore();
  }

  /* ── Draw all particles ── */
  function drawParticles() {
    particles.forEach(p => {
      ctx.save();
      ctx.globalAlpha = Math.max(0, p.life);
      ctx.beginPath();
      ctx.arc(p.x, p.y, p.r, 0, Math.PI * 2);
      if (p.gold) {
        const grad = ctx.createRadialGradient(p.x, p.y, 0, p.x, p.y, p.r * 2.5);
        grad.addColorStop(0, `rgba(245,223,160,${p.life})`);
        grad.addColorStop(1, `rgba(201,168,76,0)`);
        ctx.fillStyle = grad;
      } else {
        const grad = ctx.createRadialGradient(p.x, p.y, 0, p.x, p.y, p.r * 2.5);
        grad.addColorStop(0, `rgba(160,190,240,${p.life * 0.8})`);
        grad.addColorStop(1, `rgba(100,140,210,0)`);
        ctx.fillStyle = grad;
      }
      ctx.fill();
      ctx.restore();
    });
  }

  /* ── Update loop ── */
  function tick() {
    /* Lerp dot very close (tight follow) */
    dotX += (mouseX - dotX) * 0.18;
    dotY += (mouseY - dotY) * 0.18;
    /* Lerp ring behind (lazy orbit) */
    ringX += (mouseX - ringX) * 0.08;
    ringY += (mouseY - ringY) * 0.08;

    /* Position DOM cursor elements */
    dotEl.style.left  = dotX  + 'px';
    dotEl.style.top   = dotY  + 'px';
    ringEl.style.left = ringX + 'px';
    ringEl.style.top  = ringY + 'px';

    /* Paint lantern glow */
    const p = scrollProg();
    const gr = Math.round(100 + p * 101);
    const gg = Math.round(140 + p * 18);
    const gb = Math.round(210 - p * 150);
    const radius = Math.max(240, Math.min(window.innerWidth * 0.28, 480));
    glowEl.style.background =
      `radial-gradient(${radius}px circle at ${dotX}px ${dotY}px,` +
      ` rgba(${gr},${gg},${gb},0.055) 0%,` +
      ` rgba(${gr},${gg},${gb},0.022) 38%,` +
      ` transparent 70%)`;

    /* Record history for constellation */
    frameCount++;
    if (frameCount % HIST_STRIDE === 0 && isOver) {
      history.push({ x: mouseX, y: mouseY });
      if (history.length > HIST_LEN) history.shift();
    }

    /* Evolve particles */
    for (let i = particles.length - 1; i >= 0; i--) {
      const pt = particles[i];
      pt.x  += pt.vx;
      pt.y  += pt.vy;
      pt.vy += 0.012; // gentle gravity
      pt.vx *= 0.98;
      pt.life -= pt.decay;
      if (pt.life <= 0) particles.splice(i, 1);
    }

    /* Clear & draw canvas */
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    drawConstellation();
    drawParticles();

    requestAnimationFrame(tick);
  }

  /* ── Detect element type under cursor ── */
  function updateCursorState(target) {
    const interactive = target.closest('a, button, [role="button"], input, select, textarea');
    const textEl      = target.closest('p, span, h1, h2, h3, blockquote, .lines');

    body.classList.remove('cursor-pointer', 'cursor-text');
    if (interactive) {
      body.classList.add('cursor-pointer');
    } else if (textEl) {
      body.classList.add('cursor-text');
    }
  }

  /* ── Event listeners ── */
  window.addEventListener('mousemove', (e) => {
    mouseX = e.clientX;
    mouseY = e.clientY;
    isOver = true;
    body.classList.add('cursor-active');
    maybeSpawnParticle();
    updateCursorState(e.target);
  }, { passive: true });

  document.addEventListener('mouseleave', () => {
    isOver = false;
    body.classList.remove('cursor-active', 'cursor-pointer', 'cursor-text');
    history.length = 0;
  });
  document.addEventListener('mouseenter', () => {
    isOver = true;
    body.classList.add('cursor-active');
  });

  /* Click flash */
  document.addEventListener('mousedown', () => {
    body.classList.add('cursor-clicking');
    // Burst of extra particles on click
    for (let i = 0; i < 12; i++) {
      const angle = (i / 12) * Math.PI * 2;
      const speed = Math.random() * 2.5 + 0.8;
      particles.push({
        x: mouseX, y: mouseY,
        vx: Math.cos(angle) * speed,
        vy: Math.sin(angle) * speed - 0.5,
        life: 1,
        decay: Math.random() * 0.025 + 0.018,
        r: Math.random() * 2.2 + 0.8,
        gold: true,
      });
    }
  });
  document.addEventListener('mouseup', () => {
    body.classList.remove('cursor-clicking');
  });

  /* Kick off */
  requestAnimationFrame(tick);
})();

/* ══════════════════════════════════════════════════
   RIPPLE ON CLICK — two concentric expanding rings.
   Inner ring: gold, fast (1.6s).
   Outer ring: steel-blue, slow (2.2s), slight delay.
   Both sized to feel oceanic — not UI-button small.
══════════════════════════════════════════════════ */
(function () {
  if (reducedMotion) return;

  /* Size is viewport-relative — reads the CSS custom property set in :root */
  function getRippleSize() {
    const raw = getComputedStyle(document.documentElement)
      .getPropertyValue('--ripple-size').trim();
    return parseInt(raw) || 240;
  }

  function spawnRipple(x, y, isOuter) {
    const DIAMETER = getRippleSize();
    const el = document.createElement('div');
    el.className = isOuter ? 'ripple ripple-outer' : 'ripple';
    el.style.cssText =
      `left:${x}px; top:${y}px;` +
      `width:${DIAMETER}px; height:${DIAMETER}px;`;

    document.body.appendChild(el);

    /* Clean up after animation ends */
    el.addEventListener('animationend', () => el.remove(), { once: true });
  }

  document.addEventListener('click', (e) => {
    /* Don't ripple on interactive elements — links, buttons, inputs */
    if (e.target.closest('a, button, input, select, textarea, [role="button"]')) return;

    spawnRipple(e.clientX, e.clientY, false); // inner: gold
    spawnRipple(e.clientX, e.clientY, true);  // outer: blue, slower
  });
})();

const bar = document.getElementById('progress');
window.addEventListener('scroll', () => {
  const total = document.documentElement.scrollHeight - window.innerHeight;
  const pct   = Math.round((window.scrollY / total) * 100);
  bar.style.width = pct + '%';
  bar.setAttribute('aria-valuenow', pct);
  updateColorTemp();
  updateHookStrip();
}, { passive: true });
</script>
</body>
</html>
